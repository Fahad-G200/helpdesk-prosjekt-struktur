<!doctype html>
<html lang="no">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Helpdesk</title>

    <style>
      :root{
        --bg:#f4f6f8; --text:#222; --muted:#666;
        --card:#fff; --border:#e5e7eb;
        --primary:#2563eb; --primaryHover:#1d4ed8;
        --green:#16a34a; --yellow:#ca8a04; --red:#dc2626;
      }
      body{
        font-family: Arial, sans-serif;
        max-width: 980px;
        margin: 40px auto;
        padding: 0 16px;
        background: var(--bg);
        color: var(--text);
      }
      header{
        display:flex; justify-content:space-between; align-items:center;
        margin-bottom: 18px;
      }
      nav{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
      nav a{
        color: var(--primary);
        text-decoration:none;
        font-weight:700;
      }
      nav a:hover{ text-decoration:underline; }

      .pill{
        background:#eef2ff;
        border:1px solid #dbeafe;
        color:#1e3a8a;
        padding:6px 10px;
        border-radius:999px;
        font-size:.9rem;
        white-space:nowrap;
      }
      .card{
        background:var(--card);
        border:1px solid var(--border);
        border-radius:12px;
        padding:16px;
        margin:14px 0;
        box-shadow:0 2px 6px rgba(0,0,0,.05);
      }
      .muted{ color: var(--muted); }
      h1,h2,h3{ margin-top:0; }

      input, textarea, select{
        width:100%;
        padding:12px;
        margin:8px 0 14px;
        border-radius:10px;
        border:1px solid #cfd6df;
        box-sizing:border-box;
        font-size:1rem;
      }

      .btn, button{
        display:inline-block;
        background: var(--primary);
        color:#fff;
        border:0;
        border-radius:10px;
        padding:10px 14px;
        font-weight:800;
        cursor:pointer;
        text-decoration:none;
      }
      .btn:hover, button:hover{ background: var(--primaryHover); }

      .btn-secondary{
        background:#475569;
      }
      .btn-secondary:hover{
        background:#334155;
      }

      .flash{
        border-left:6px solid var(--green);
      }

      .badge{
        display:inline-block;
        padding:4px 10px;
        border-radius:999px;
        font-size:.85rem;
        font-weight:800;
      }
      .badge-open{ background:#dcfce7; color:#14532d; border:1px solid #bbf7d0; }
      .badge-closed{ background:#fee2e2; color:#7f1d1d; border:1px solid #fecaca; }

      .level1{ border-left:6px solid var(--green); }
      .level2{ border-left:6px solid var(--yellow); }
      .level3{ border-left:6px solid var(--red); }

      .row{ display:flex; gap:12px; flex-wrap:wrap; }
      .row > *{ flex: 1 1 260px; }
    </style>
  </head>

  <body>
    <header>
      <strong>Helpdesk</strong>

      <nav>
        {% if session.get("user") %}
          <span class="pill">Innlogget: {{ session.get("user") }} ({{ session.get("role") }})</span>
          <a href="{{ url_for('main.kb') }}">Kunnskapsbase</a>
          <a href="{{ url_for('main.tickets') }}">Mine saker</a>
          <a href="{{ url_for('main.logout') }}">Logg ut</a>
        {% endif %}
      </nav>
    </header>

    {# Flash-meldinger (f.eks. “Sak opprettet”) #}
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for m in messages %}
          <div class="card flash">{{ m }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </body>
</html>