{% extends "base.html" %}
{% block content %}

<div class="card">
  <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
    <div>
      <h1>ğŸ“š KB Admin</h1>
      <p class="muted">Administrer kunnskapsbaseartikler</p>
    </div>

    <a href="{{ url_for('main.create_article_view') }}"
       style="background:#10b981; color:#fff; padding:10px 16px; border-radius:12px; text-decoration:none; font-weight:900;">
      + Ny artikkel
    </a>
  </div>
</div>

<div class="card">
  <table style="width:100%; border-collapse:collapse;">
    <thead>
      <tr style="background:rgba(148,163,184,.06); border-bottom:1px solid rgba(148,163,184,.14);">
        <th style="padding:12px; text-align:left;">ID</th>
        <th style="padding:12px; text-align:left;">Tittel</th>
        <th style="padding:12px; text-align:left;">Forfatter</th>
        <th style="padding:12px; text-align:left;">Opprettet</th>
        <th style="padding:12px; text-align:right;">Handlinger</th>
      </tr>
    </thead>
    <tbody>
      {% for a in articles %}
      <tr style="border-bottom:1px solid rgba(148,163,184,.10);">
        <td style="padding:12px;"><strong>#{{ a.id }}</strong></td>
        <td style="padding:12px;">
          <a href="{{ url_for('main.view_article', article_id=a.id) }}" style="color:#60a5fa; font-weight:900; text-decoration:none;">
            {{ a.title }}
          </a>
        </td>
        <td style="padding:12px; color:#94a3b8;">{{ a.author }}</td>
        <td style="padding:12px; color:#94a3b8;">{{ a.created_at }}</td>
        <td style="padding:12px; text-align:right;">
          <div style="display:flex; gap:8px; justify-content:flex-end; flex-wrap:wrap;">
            <a href="{{ url_for('main.view_article', article_id=a.id) }}"
               style="background:#3b82f6; color:#fff; padding:6px 12px; border-radius:10px; text-decoration:none; font-size:12px; font-weight:900;">
              ğŸ‘ï¸ Vis
            </a>

            <a href="{{ url_for('main.edit_article_view', article_id=a.id) }}"
               style="background:#f59e0b; color:#fff; padding:6px 12px; border-radius:10px; text-decoration:none; font-size:12px; font-weight:900;">
              âœï¸ Rediger
            </a>

            <form method="post" action="{{ url_for('main.delete_article', article_id=a.id) }}" style="display:inline;"
                  onsubmit="return confirm('Slette artikkel #{{ a.id }}?');">
              <button type="submit" style="background:#ef4444; padding:6px 12px; font-size:12px;">ğŸ—‘ï¸ Slett</button>
            </form>
          </div>
        </td>
      </tr>
      {% endfor %}

      {% if articles|length == 0 %}
      <tr>
        <td colspan="5" style="padding:14px; color:#94a3b8;">Ingen artikler Ã¥ vise.</td>
      </tr>
      {% endif %}
    </tbody>
  </table>
</div>

{% endblock %}